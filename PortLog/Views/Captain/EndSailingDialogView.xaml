<Window x:Class="PortLog.Views.EndSailingDialogView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="End Sailing" 
        Height="680" 
        Width="600" 
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize" 
        Background="#F8F9FA">

    <Window.Resources>
        <!-- Shadow Effect -->
        <DropShadowEffect x:Key="CardShadow"
                          BlurRadius="20"
                          ShadowDepth="3"
                          Opacity="0.15"
                          Color="#000000"/>

        <!-- Success Button Style -->
        <Style x:Key="SuccessButton" TargetType="Button">
            <Setter Property="Background" Value="#00B894"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Padding" Value="20 10"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#00a07f"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Secondary Button Style -->
        <Style x:Key="SecondaryButton" TargetType="Button">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="#666666"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#E0E0E0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Padding" Value="20 10"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#F5F5F5"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- TextBox Style -->
        <Style x:Key="ModernTextBox" TargetType="TextBox">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Padding" Value="12 10"/>
            <Setter Property="BorderBrush" Value="#E0E0E0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6">
                            <ScrollViewer x:Name="PART_ContentHost" 
                                          Margin="{TemplateBinding Padding}"
                                          Foreground="{TemplateBinding Foreground}"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- DatePicker Style -->
        <Style x:Key="ModernDatePicker" TargetType="DatePicker">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Padding" Value="12 10"/>
            <Setter Property="BorderBrush" Value="#E0E0E0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FontSize" Value="14"/>
        </Style>
    </Window.Resources>

    <!-- WRAP SEMUA DENGAN SCROLLVIEWER -->
    <ScrollViewer VerticalScrollBarVisibility="Auto"
                  HorizontalScrollBarVisibility="Disabled"
                  Padding="30">

        <Border Background="White" 
                CornerRadius="16" 
                Padding="35"
                Effect="{StaticResource CardShadow}">

            <!-- GANTI StackPanel ke StackPanel tetap (biar linear & scroll oke) -->
            <StackPanel>

                <!-- Header -->
                <StackPanel Orientation="Horizontal" Margin="0 0 0 30">
                    <TextBlock Text="⚓" FontSize="42" VerticalAlignment="Center" Margin="0 0 15 0"/>
                    <StackPanel>
                        <TextBlock Text="End Sailing"
                                   FontSize="28"
                                   FontWeight="Bold"
                                   Foreground="#1A1A1A"/>
                        <TextBlock Text="Complete voyage and record details" 
                                   FontSize="13"
                                   Foreground="#666666"
                                   Margin="0 4 0 0"/>
                    </StackPanel>
                </StackPanel>

                <!-- Ship Info Banner -->
                <Border Background="#E3F2FD" 
                        CornerRadius="10" 
                        Padding="15"
                        Margin="0 0 0 25">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="🚢" FontSize="20" Margin="0 0 10 0" VerticalAlignment="Center"/>
                        <StackPanel>
                            <TextBlock Text="SHIP" 
                                       FontSize="10" 
                                       FontWeight="SemiBold"
                                       Foreground="#666666"/>
                            <TextBlock Text="{Binding ShipName}" 
                                       FontSize="16"
                                       FontWeight="Bold"
                                       Foreground="#0081A7"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- FORM AREA -->
                <StackPanel Margin="0 0 0 20">

                    <!-- Arrival Port -->
                    <StackPanel Margin="0 0 0 20">
                        <TextBlock Text="ARRIVAL PORT" 
                                   FontWeight="SemiBold" 
                                   FontSize="11"
                                   Foreground="#666666"
                                   Margin="0 0 0 8"/>
                        <TextBox Text="{Binding ArrivalPort}"
                                 Style="{StaticResource ModernTextBox}"/>
                    </StackPanel>

                    <!-- Date & Time -->
                    <StackPanel Margin="0 0 0 20">
                        <TextBlock Text="ARRIVAL DATE and TIME"
                FontWeight="SemiBold"
                FontSize="11"
                Foreground="#666666"
                Margin="0 0 0 8"/>

                        <StackPanel Orientation="Horizontal">
                            <StackPanel Margin="0 0 15 0">
                                <TextBlock Text="Date"
                        FontSize="12"
                        Foreground="#666666"
                        Margin="0 0 0 6"/>
                                <DatePicker SelectedDate="{Binding ArrivalDate}"
                         Style="{StaticResource ModernDatePicker}"
                         Width="240" Height="59" VerticalAlignment="Center" VerticalContentAlignment="Center"/>
                            </StackPanel>

                            <StackPanel>
                                <TextBlock Text="Time (HH:mm)"
                        FontSize="12"
                        Foreground="#666666"
                        Margin="0 0 0 6"/>
                                <TextBox Text="{Binding ArrivalTimeText}"
                      Style="{StaticResource ModernTextBox}"
                      Width="140" Height="59"/>
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>

                    <!-- Revenue -->
                    <StackPanel Margin="0 0 0 20">
                        <TextBlock Text="REVENUE (IDR)" 
                                   FontWeight="SemiBold" 
                                   FontSize="11"
                                   Foreground="#666666"
                                   Margin="0 0 0 8"/>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="💰" FontSize="16" Margin="0 0 8 0" VerticalAlignment="Center"/>
                            <TextBox Text="{Binding RevenueText}"
                                     Style="{StaticResource ModernTextBox}"
                                     Width="250"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- Trip metrics -->
                    <StackPanel Margin="0 0 0 20">
                        <TextBlock Text="TRIP METRICS" 
                                   FontWeight="SemiBold" 
                                   FontSize="11"
                                   Foreground="#666666"
                                   Margin="0 0 0 8"/>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="15"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Distance (km)" FontSize="12" Foreground="#666666" Margin="0 0 0 6"/>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="📏" FontSize="14" Margin="0 0 6 0"/>
                                    <TextBox Text="{Binding TotalDistanceText}" Style="{StaticResource ModernTextBox}" Width="180"/>
                                </StackPanel>
                            </StackPanel>

                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Avg Fuel (L/100km)" FontSize="12" Foreground="#666666" Margin="0 0 0 6"/>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="⛽" FontSize="14" Margin="0 0 6 0"/>
                                    <TextBox Text="{Binding AvgFuelText}" Style="{StaticResource ModernTextBox}" Width="180"/>
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                    </StackPanel>

                    <!-- Notes -->
                    <StackPanel Margin="0 0 0 20">
                        <TextBlock Text="NOTES" 
                                   FontWeight="SemiBold" 
                                   FontSize="11"
                                   Foreground="#666666"
                                   Margin="0 0 0 8"/>
                        <TextBox Text="{Binding Notes}"
                                 Style="{StaticResource ModernTextBox}"
                                 Height="90"
                                 AcceptsReturn="True"
                                 TextWrapping="Wrap"
                                 VerticalScrollBarVisibility="Auto"/>
                    </StackPanel>

                </StackPanel>

                <!-- Error -->
                <Border Background="#FFE5E5"
                        CornerRadius="8"
                        Padding="12"
                        Margin="0 0 0 20"
                        Visibility="{Binding ErrorMessage, Converter={StaticResource StringToVisibilityConverter}}">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="❌" FontSize="14" Margin="0 0 8 0"/>
                        <TextBlock Text="{Binding ErrorMessage}" Foreground="#C82333" FontSize="13" FontWeight="SemiBold"/>
                    </StackPanel>
                </Border>

                <Border Height="1" Background="#E0E0E0" Margin="0 0 0 25"/>

                <!-- Buttons -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Cancel" Style="{StaticResource SecondaryButton}" Width="100" Margin="0 0 10 0" Command="{Binding CancelCommand}"/>
                    <Button Content="Complete Voyage" Style="{StaticResource SuccessButton}" Width="160" Command="{Binding SaveCommand}"/>
                </StackPanel>

            </StackPanel>
        </Border>
    </ScrollViewer>
</Window>